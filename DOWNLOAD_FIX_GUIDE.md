# ЁЯФз р╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓р╕Бр╕▓р╕гр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╕Др╣Йр╕▓р╕З

## ЁЯУЛ р╕кр╕гр╕╕р╕Ыр╕Ыр╕▒р╕Нр╕лр╕▓
р╣Др╕Яр╕ер╣Мр╕Др╣Йр╕▓р╕Зр╕Чр╕╡р╣Ир╕лр╕Щр╣Йр╕▓ loading р╣Ар╕бр╕╖р╣Ир╕нр╕Юр╕вр╕▓р╕вр╕▓р╕бр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣М PDF р╣Ар╕Щр╕╖р╣Ир╕нр╕Зр╕Ир╕▓р╕Б:
1. Server р╣Др╕бр╣Ир╣Др╕Фр╣Йр╕Чр╕│р╕Зр╕▓р╕Щ
2. р╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕гр╕░р╕лр╕зр╣Ир╕▓р╕З frontend р╕Бр╕▒р╕Ъ backend р╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓
3. р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Др╕Яр╕ер╣Мр╕Бр╣Ир╕нр╕Щр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф

## тЬЕ р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Чр╕╡р╣Ир╕Чр╕│

### 1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Server
```bash
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ server р╕Чр╕│р╕Зр╕▓р╕Щр╕нр╕вр╕╣р╣И
netstat -ano | findstr :3001

# р╕гр╕▒р╕Щ server р╕Цр╣Йр╕▓р╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Др╕Фр╣Йр╕гр╕▒р╕Щ
node server.cjs
```

### 2. р╣Бр╕Бр╣Йр╣Др╕В FileViewer.jsx

#### ЁЯФз р╣Ар╕Юр╕┤р╣Ир╕бр╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Др╕Яр╕ер╣М
```javascript
// р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Др╕Яр╕ер╣Мр╕бр╕╡р╕нр╕вр╕╣р╣Ир╕Ир╕гр╕┤р╕З
useEffect(() => {
  if (filename) {
    checkFileExists();
  }
}, [filename]);

const checkFileExists = async () => {
  try {
    const response = await fetch(`http://localhost:3001/api/check-file/${filename}`);
    if (response.ok) {
      setFileExists(true);
      setLoading(false);
    } else {
      setError('р╣Др╕бр╣Ир╕Юр╕Ър╣Др╕Яр╕ер╣М');
      setLoading(false);
    }
  } catch (err) {
    setError('р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Др╕Яр╕ер╣Мр╣Др╕Фр╣Й');
    setLoading(false);
  }
};
```

#### ЁЯФз р╣Бр╕Бр╣Йр╣Др╕Вр╕Бр╕▓р╕гр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣М
```javascript
function downloadFile() {
  if (filename) {
    fetch(`http://localhost:3001/api/download/${filename}`)
      .then(response => {
        if (response.ok) {
          return response.blob();
        }
        throw new Error('р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣Мр╣Др╕Фр╣Й');
      })
      .then(blob => {
        const url = window.URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        link.download = filename;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        window.URL.revokeObjectURL(url);
      })
      .catch(error => {
        console.error('Download error:', error);
        alert('р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣Мр╣Др╕Фр╣Й: ' + error.message);
      });
  }
}
```

### 3. р╣Ар╕Юр╕┤р╣Ир╕б Endpoint р╣Гр╕Щ Server

#### ЁЯФз `server.cjs`
```javascript
// р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Др╕Яр╕ер╣М
app.get('/api/check-file/:filename', (req, res) => {
  const filename = req.params.filename;
  const filePath = path.join(__dirname, 'uploads', filename);
  
  if (fs.existsSync(filePath)) {
    res.json({ exists: true, filename: filename });
  } else {
    res.status(404).json({ exists: false, error: 'р╣Др╕бр╣Ир╕Юр╕Ър╣Др╕Яр╕ер╣М' });
  }
});

// р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣М
app.get('/api/download/:filename', (req, res) => {
  const filename = req.params.filename;
  const filePath = path.join(__dirname, 'uploads', filename);
  
  if (fs.existsSync(filePath)) {
    res.download(filePath, filename, (err) => {
      if (err) {
        console.error('Download error:', err);
        res.status(500).json({ error: 'р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣Мр╣Др╕Фр╣Й' });
      }
    });
  } else {
    res.status(404).json({ error: 'р╣Др╕бр╣Ир╕Юр╕Ър╣Др╕Яр╕ер╣М' });
  }
});
```

## ЁЯзк р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

### 1. р╣Др╕Яр╕ер╣Мр╕Чр╕Фр╕кр╕нр╕Ъ
р╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М `test-file-download.html` р╣Ар╕Юр╕╖р╣Ир╕нр╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф

### 2. р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ
1. р╣Ар╕Ыр╕┤р╕Фр╣Др╕Яр╕ер╣М `test-file-download.html` р╣Гр╕Щр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Др╕Яр╕ер╣Мр╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕▓р╕Щр╕░ "тЬЕ р╕бр╕╡р╕нр╕вр╕╣р╣И"
3. р╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕б "р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф"
4. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Др╕Яр╕ер╣Мр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╕кр╕│р╣Ар╕гр╣Зр╕И

### 3. р╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Server
```bash
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ port 3001
netstat -ano | findstr :3001

# р╕Др╕зр╕гр╣Ар╕лр╣Зр╕Щ:
# TCP    0.0.0.0:3001           0.0.0.0:0              LISTENING       [PID]
```

## ЁЯЪА р╕зр╕┤р╕Шр╕╡р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### 1. р╣Гр╕Щр╣Бр╕нр╕Ыр╕Юр╕ер╕┤р╣Ар╕Др╕Кр╕▒р╕Щ
1. р╣Др╕Ыр╕Чр╕╡р╣Ир╕лр╕Щр╣Йр╕▓ "р╕гр╕▓р╕вр╕Зр╕▓р╕Щ"
2. р╕Др╕ер╕┤р╕Бр╕Чр╕╡р╣Ир╕Кр╕╖р╣Ир╕нр╣Др╕Яр╕ер╣Мр╣Гр╕Щр╕Хр╕▓р╕гр╕▓р╕З "р╕Ьр╕ер╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╕вр╣Йр╕нр╕Щр╕лр╕ер╕▒р╕З"
3. р╣Др╕Яр╕ер╣Мр╕Ир╕░р╣Ар╕Ыр╕┤р╕Фр╣Гр╕Щ modal
4. р╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕бр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф (р╣Др╕нр╕Др╕нр╕Щр╕ер╕╣р╕Бр╕ир╕гр╕ер╕З)

### 2. р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓
- **р╣Др╕Яр╕ер╣Мр╕Др╣Йр╕▓р╕Зр╕Чр╕╡р╣И loading**: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ server р╕Чр╕│р╕Зр╕▓р╕Щр╕нр╕вр╕╣р╣И
- **р╣Др╕бр╣Ир╕Юр╕Ър╣Др╕Яр╕ер╣М**: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Др╕Яр╕ер╣Мр╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М `uploads/`
- **р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Др╕бр╣Ир╣Др╕Фр╣Й**: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ console р╕кр╕│р╕лр╕гр╕▒р╕Ъ error

## ЁЯФН р╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ

### 1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Др╕Яр╕ер╣Мр╣Гр╕Щр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М
```bash
# р╕Фр╕╣р╣Др╕Яр╕ер╣Мр╣Гр╕Щр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М uploads
dir uploads
```

### 2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ API
```bash
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Др╕Яр╕ер╣М
curl http://localhost:3001/api/check-file/19b163d328d6d6a6328258e082a00f76

# р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣М
curl -O http://localhost:3001/api/download/19b163d328d6d6a6328258e082a00f76
```

### 3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Console
р╣Ар╕Ыр╕┤р╕Ф Developer Tools (F12) р╣Бр╕ер╕░р╕Фр╕╣ Console р╕кр╕│р╕лр╕гр╕▒р╕Ъ error messages

## тЪая╕П р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕р╕кр╕│р╕Др╕▒р╕Н

1. **Server р╕Хр╣Йр╕нр╕Зр╕Чр╕│р╕Зр╕▓р╕Щ**: р╕Хр╣Йр╕нр╕Зр╕гр╕▒р╕Щ `node server.cjs` р╕Бр╣Ир╕нр╕Щ
2. **Port 3001**: р╕Хр╣Йр╕нр╕Зр╣Др╕бр╣Ир╕бр╕╡р╣Вр╕Ыр╕гр╣Бр╕Бр╕гр╕бр╕нр╕╖р╣Ир╕Щр╣Гр╕Кр╣Й port 3001
3. **р╣Др╕Яр╕ер╣Мр╕Хр╣Йр╕нр╕Зр╕бр╕╡р╕нр╕вр╕╣р╣И**: р╣Др╕Яр╕ер╣Мр╕Хр╣Йр╕нр╕Зр╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М `uploads/`
4. **CORS**: р╕Хр╣Йр╕нр╕Зр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ CORS р╣Гр╕Щ server

## тЬЕ р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М

- тЬЕ р╣Др╕Яр╕ер╣Мр╣Др╕бр╣Ир╕Др╣Йр╕▓р╕Зр╕Чр╕╡р╣Ир╕лр╕Щр╣Йр╕▓ loading
- тЬЕ р╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣Мр╣Др╕Фр╣Й
- тЬЕ р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б error р╕Чр╕╡р╣Ир╕Кр╕▒р╕Фр╣Ар╕Ир╕Щ
- тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Др╕Яр╕ер╣Мр╕Бр╣Ир╕нр╕Щр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф
- тЬЕ р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕г error р╕Чр╕╡р╣Ир╕Фр╕╡р╕Вр╕╢р╣Йр╕Щ

## ЁЯРЫ р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓р╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б

### р╕Цр╣Йр╕▓р╣Др╕Яр╕ер╣Мр╕вр╕▒р╕Зр╕Др╣Йр╕▓р╕З
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ server р╕Чр╕│р╕Зр╕▓р╕Щ: `netstat -ano | findstr :3001`
2. р╕гр╕╡р╕кр╕Хр╕▓р╕гр╣Мр╕Ч server: `node server.cjs`
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ console р╣Гр╕Щр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М
4. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Др╕Яр╕ер╣Мр╣Гр╕Щр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М `uploads/`

### р╕Цр╣Йр╕▓р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Др╕бр╣Ир╣Др╕Фр╣Й
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ network tab р╣Гр╕Щ Developer Tools
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ response р╕Ир╕▓р╕Б API
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕Бр╕▓р╕гр╣Ар╕Вр╣Йр╕▓р╕Цр╕╢р╕Зр╣Др╕Яр╕ер╣М
4. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Вр╕Щр╕▓р╕Фр╣Др╕Яр╕ер╣М 